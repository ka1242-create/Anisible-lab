---
- name: check for existing configuration under an interface and update if not present 
  connection: network_cli
  gather_facts: false

  hosts: all

  tasks:
      - name: check if IP helper is configured 
        ios_command:
          commands: "sh run interface {{ item }}"
        with_items: 
          - GigabitEthernet1
        register: check_helper
      - set_fact:
          check_helper_add: "{{ check_helper.stdout[6] }}"
          
      - name: configuration commands on cisco device
        ios_config:
            line: 
              - ip helper-address 172.16.0.1
            parents: "interface {{ item }}"
        with_items: 
          - GigabitEthernet1
        when: check_helper_add == 'ip helper-address 172.26.0.1'
...
